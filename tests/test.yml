- name: irescue genome
  tags:
    - genome
    - single
  command: irescue -b ./tests/data/Aligned.sortedByCoord.out.bam -g test --keeptmp --dumpEC --verbose
  files:
    - path: "IRescue_out/barcodes.tsv.gz"
      md5sum: 1a74fa12e65ac1703bbe61282854f151
    - path: "IRescue_out/features.tsv.gz"
      md5sum: e8bf21611afd1f40d722ed985f4e3392
    - path: "IRescue_out/matrix.mtx.gz"
      md5sum: 04ddbd538c796f019f37d3048b159a2f
    - path: "IRescue_out/ec_dump.tsv"
      md5sum: eae2292b07883e700620eafd20820358

- name: irescue genome multiprocessing
  tags:
    - genome
    - multi
  command: irescue -b ./tests/data/Aligned.sortedByCoord.out.bam -g test -p 2 --keeptmp --dumpEC --verbose
  files:
    - path: "IRescue_out/barcodes.tsv.gz"
      md5sum: 1a74fa12e65ac1703bbe61282854f151
    - path: "IRescue_out/features.tsv.gz"
      md5sum: e8bf21611afd1f40d722ed985f4e3392
    - path: "IRescue_out/matrix.mtx.gz"
      md5sum: 04ddbd538c796f019f37d3048b159a2f
    - path: "IRescue_out/ec_dump.tsv"
      md5sum: eae2292b07883e700620eafd20820358

- name: irescue coords
  tags:
    - coords
    - single
  command: irescue -b ./tests/data/Aligned.sortedByCoord.out.bam -r ./tests/data/rmsk.bed.gz --keeptmp --dumpEC --verbose
  files:
    - path: "IRescue_out/barcodes.tsv.gz"
      md5sum: 1a74fa12e65ac1703bbe61282854f151
    - path: "IRescue_out/features.tsv.gz"
      md5sum: e8bf21611afd1f40d722ed985f4e3392
    - path: "IRescue_out/matrix.mtx.gz"
      md5sum: 04ddbd538c796f019f37d3048b159a2f
    - path: "IRescue_out/ec_dump.tsv"
      md5sum: eae2292b07883e700620eafd20820358

- name: irescue coords multiprocessing
  tags:
    - coords
    - multi
  command: irescue -b ./tests/data/Aligned.sortedByCoord.out.bam -r ./tests/data/rmsk.bed.gz -p 2 --keeptmp --dumpEC --verbose
  files:
    - path: "IRescue_out/barcodes.tsv.gz"
      md5sum: 1a74fa12e65ac1703bbe61282854f151
    - path: "IRescue_out/features.tsv.gz"
      md5sum: e8bf21611afd1f40d722ed985f4e3392
    - path: "IRescue_out/matrix.mtx.gz"
      md5sum: 04ddbd538c796f019f37d3048b159a2f
    - path: "IRescue_out/ec_dump.tsv"
      md5sum: eae2292b07883e700620eafd20820358


- name: irescue whitelist genome
  tags:
    - genome
    - single
    - whitelist
  command: irescue -b ./tests/data/Aligned.sortedByCoord.out.bam -g test -w ./tests/data/whitelist.txt --keeptmp --dumpEC --verbose
  files:
    - path: "IRescue_out/barcodes.tsv.gz"
      md5sum: 95dccc15cbee4feeeae2fbce4d7b41ad
    - path: "IRescue_out/features.tsv.gz"
      md5sum: 2dcec6f4aead5faba9c1af44b0129b55
    - path: "IRescue_out/matrix.mtx.gz"
      md5sum: 85c61d1df6ccadf83eafc6bc36a21c89
    - path: "IRescue_out/ec_dump.tsv"
      md5sum: 70090e842d074fdf507deb56581238aa

- name: irescue whitelist genome multiprocessing
  tags:
    - genome
    - multi
    - whitelist
  command: irescue -b ./tests/data/Aligned.sortedByCoord.out.bam -g test -p 2 -w ./tests/data/whitelist.txt --keeptmp --dumpEC --verbose
  files:
    - path: "IRescue_out/barcodes.tsv.gz"
      md5sum: 95dccc15cbee4feeeae2fbce4d7b41ad
    - path: "IRescue_out/features.tsv.gz"
      md5sum: 2dcec6f4aead5faba9c1af44b0129b55
    - path: "IRescue_out/matrix.mtx.gz"
      md5sum: 85c61d1df6ccadf83eafc6bc36a21c89
    - path: "IRescue_out/ec_dump.tsv"
      md5sum: 70090e842d074fdf507deb56581238aa

- name: irescue whitelist coords
  tags:
    - coords
    - single
    - whitelist
  command: irescue -b ./tests/data/Aligned.sortedByCoord.out.bam -r ./tests/data/rmsk.bed.gz -w ./tests/data/whitelist.txt --keeptmp --dumpEC --verbose
  files:
    - path: "IRescue_out/barcodes.tsv.gz"
      md5sum: 95dccc15cbee4feeeae2fbce4d7b41ad
    - path: "IRescue_out/features.tsv.gz"
      md5sum: 2dcec6f4aead5faba9c1af44b0129b55
    - path: "IRescue_out/matrix.mtx.gz"
      md5sum: 85c61d1df6ccadf83eafc6bc36a21c89
    - path: "IRescue_out/ec_dump.tsv"
      md5sum: 70090e842d074fdf507deb56581238aa

- name: irescue whitelist coords multiprocessing
  tags:
    - coords
    - multi
    - whitelist
  command: irescue -b ./tests/data/Aligned.sortedByCoord.out.bam -r ./tests/data/rmsk.bed.gz -w ./tests/data/whitelist.txt --keeptmp --dumpEC -p 2 --verbose
  files:
    - path: "IRescue_out/barcodes.tsv.gz"
      md5sum: 95dccc15cbee4feeeae2fbce4d7b41ad
    - path: "IRescue_out/features.tsv.gz"
      md5sum: 2dcec6f4aead5faba9c1af44b0129b55
    - path: "IRescue_out/matrix.mtx.gz"
      md5sum: 85c61d1df6ccadf83eafc6bc36a21c89
    - path: "IRescue_out/ec_dump.tsv"
      md5sum: 70090e842d074fdf507deb56581238aa
